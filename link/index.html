<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Access Link</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap");

      body {
        font-family: "Poppins", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        text-align: center;
        background: white;
      }
      .container {
        background: #fff;
        padding: 30px 20px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        max-width: 400px;
      }
      h1 {
        font-family: "Poppins", sans-serif;
        font-size: 1.5rem;
        font-weight: 500;
        margin-bottom: 15px;
      }
      p {
        font-size: 1.2rem;
        margin-bottom: 25px;
      }
      ol {
        text-align: left;
        margin-bottom: 25px;
      }
      button {
        background: #25f;
        color: white;
        border: none;
        padding: 12px 25px;
        font-size: 1rem;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.3s;
      }
      button:hover {
        background: #0077cc;
      }
      .spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #25f;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </head>
  <body>
    <div class="container" id="tiktokInstructions" style="display: none">
      <h1>Hi! To access the link, follow these two simple steps.</h1>
      <ol>
        <li>Tap the <strong>â‹®</strong> in the top right corner of TikTok.</li>
        <li>
          Then tap <strong style="color: #1abc9c">Open in Browser</strong>.
        </li>
      </ol>
    </div>

    <div class="container" id="loadingScreen" style="display: none">
      <h1>Loading...</h1>
      <div class="spinner"></div>
      <p>Please wait while we prepare your content</p>
    </div>


    <script>
      const _0x1234 = ['ZGlzcGxheQ==', 'YmxvY2s=', 'aHJlZg==', 'dXNlckFnZW50', 'VGlrVG9r'];
      const _0x5678 = function(a, b) { return atob(a); };
      const link = "https://apps.apple.com/au/app/breaktime-focus-app-blocker/id6746742596";

      function checkBrowser() {
        const userAgent = navigator.userAgent; // Correctly reference navigator.userAgent
        const isTikTok = /TikTok|musical_ly|BytedanceWebview/i.test(userAgent);
        return isTikTok;
      }

      function showLoading() {
        document.getElementById("loadingScreen").style[_0x5678(_0x1234[0])] = _0x5678(_0x1234[1]);
      }

      function autoRedirect() {
        const delay = Math.random() * 1000 + 2000;
        setTimeout(() => {
          window.location[_0x5678(_0x1234[2])] = link;
        }, delay);
      }
      if (checkBrowser()) {
      document.getElementById("tiktokInstructions").style[_0x5678(_0x1234[0])] = _0x5678(_0x1234[1]);
      // const instructionsHeader = document.querySelector("#tiktokInstructions h1");
      // instructionsHeader.textContent += ` (User Agent: ${navigator.userAgent})`; // Append the user agent
      } else {
      showLoading();
      const waitTime = Math.random() * 2000 + 1500;
      setTimeout(() => {
        document.getElementById("loadingScreen").style.display = "none";
        autoRedirect();
      }, waitTime);
      }
    </script>
  </body>
</html>
